Что общего между ключевым словом volatile в языках C# и Java и ключевым словом
volatile в языке C++? Ничего! Различие между атомарными и volatile-переменными
таковы:
• спецификатор volatile предназначен для особых объектов, операции чтения
и записи
которых не разрешается оптимизировать;
• шаблон std::atomic позволяет объявлять переменные, предназначенные для
безопасного
чтения и записи из различных потоков.
В этом кроется причина недоразумения. Ключевое слово volatile в языках C++ и Java
имеет тот же смысл, что и шаблон std::atomic в языке C++. С другой стороны, слово
volatile в языке C++ не имеет отношения к многопоточности.
В языках C и C++ слово volatile обычно используется при программировании встро-
енных систем для обозначения переменных, которые могут менять свои значения
независимо от хода выполнения программы. Одним из примеров может служить пе-
ременная, представляющая внешнее устройство (т. е. ввод-вывод с прямым отображением
на память). Поскольку значения этих переменных могут изменяться неза-
висимо от выполнения программы, операции над ними должны всегда содержать
обращение к основной памяти, поэтому использовать буферную память для оптими-
зации таких операций нельзя.