# барьеры памяти

- std::atomic_thread_fence - синхронизация доступа к памяти между потоками

- std::atomic_signal_fence - синхронизация между обработчиками сигнала и кодом, выполняющимся в том же потоке

есть два вида операции:
- чтение
- запись

4 способа соеденить их:
LoadLoad: чтение, затем чтение
LoadStore: чтение, потом запись
StoreLoad: запись затем чтение
StoreStore: запись, затем запись

если между ними поставить барьер, то можно гарантировать, что порядок операций в парах останется неизменным, а в отсутствии рарбера могут быть переупорядочены:
- неатомарные операции
- атомарные операции с ослабленной семантикой

Барьеры:
- std::atomic_thread_fence(), thread_fence(std::memory_order_
seq_cst) полный барьер 
- std::atomic_thread_fence(std::memory_order_acquire) барьер захвата
- std::atomic_thread_fence(std::memory_order_
release) барьер освобождения

для барьеров не нужны атомарные переменные,
но они более тяжеловесны, чем соответствующие атомарные операции.